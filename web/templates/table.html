{{/* ONLY show headers if we are on the first page of results */}}
{{if eq .NextOffset 20}}
<thead>
    <tr>
        {{range .Headers}}
            <th>{{.}}</th>
        {{end}}
    </tr>
</thead>
{{end}}

{{/* Always show the rows */}}
{{range $row := .Rows}}
<tr>
    {{range $col := $.Headers}}
        <td>{{index $row $col}}</td>
    {{end}}
</tr>
{{else}}
    {{/* Only show "No players" if it's the first page and empty */}}
    {{if eq .NextOffset 20}}
    <tr><td colspan="100%">No players found.</td></tr>
    {{end}}
{{end}}

{{/* The Load More button */}}
{{if eq (len .Rows) 20}}
<tr>
    <td colspan="100%" style="text-align: center;">
        <button hx-get="/search?search={{.Query}}&offset={{.NextOffset}}" 
                hx-target="closest tr" 
                hx-swap="outerHTML">
            Load More...
        </button>
    </td>
</tr>
{{end}}
