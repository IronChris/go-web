<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Go + HTMX Postgres</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
       :root {
    --bg: #1a1a1a;
    --surface: #2d2d2d;
    --text: #e0e0e0;
    --accent: #4a9eff;
}

body { 
    background: var(--bg); 
    color: var(--text); 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
}

.search-container {
    margin: 40px 0;
    width: 100%;
    max-width: 600px;
}

input[type="search"] {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #444;
    background: var(--surface);
    color: white;
    font-size: 1.1rem;
}

table {
    width: 90%;
    max-width: 1000px;
    border-collapse: collapse;
    background: var(--surface);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

th { background: #3d3d3d; padding: 15px; text-align: left; color: var(--accent); }
td { padding: 12px 15px; border-bottom: 1px solid #444; }
tr:hover { background: #383838; }

/* Styling for FIDE Titles */
.title-gm { color: #ffad42; font-weight: bold; }
.title-im { color: #bd93f9; font-weight: bold; }    </style>
</head>
<body>
    <h1>FIDE Players</h1>
    
   <div class="search-box">
    <input type="text" 
           name="search" 
           placeholder="Search players (e.g. Kasparov%)..." 
           hx-post="/search" 
           hx-trigger="keyup changed delay:300ms" 
           hx-target="#player-results" 
           hx-indicator="#loading">
    <span id="loading" class="htmx-indicator">Searching...</span>
</div>

<table>
    <thead>
        <tr>
            <th>B-Day</th>
            <th>Name</th>
            <th>Rating (Dec 25)</th>
        </tr>
    </thead>
    <tbody id="player-results">
        {{template "table-rows" .}}
    </tbody>
</table>

{{define "table-rows"}}
    {{range .}}
    <tr>
        <td>{{.Bday}}</td>
        <td>{{.Name}}</td>
        <td>{{.DEC25}}</td>
    </tr>
    {{else}}
    <tr>
        <td colspan="3">No players found.</td>
    </tr>
    {{end}}
{{end}}        </tbody>
    </table>

    </body>
</html>
