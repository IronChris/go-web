<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Go + HTMX Postgres</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
        :root { --bg: #1a1a1a; --surface: #2d2d2d; --text: #e0e0e0; --accent: #4a9eff; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; align-items: center; }
        .search-box { margin: 40px 0; width: 100%; max-width: 600px; }
        input { width: 100%; padding: 12px; background: var(--surface); color: white; border: 1px solid #444; border-radius: 8px; }
        table { width: 90%; max-width: 1000px; border-collapse: collapse; background: var(--surface); border-radius: 8px; }
        th { background: #3d3d3d; padding: 15px; text-align: left; color: var(--accent); }
        td { padding: 12px 15px; border-bottom: 1px solid #444; }
	tr {
	    animation: fadeIn 0.3s ease-in;
	}

		@keyframes fadeIn {
    	from { opacity: 0; transform: translateY(5px); }
    	to { opacity: 1; transform: translateY(0); }
	}
    </style>
</head>
<body>
    <h1>FIDE Players</h1>
    <div class="search-box">
        <input type="text" name="search" placeholder="Search (e.g. Kasparov%)..." 
               hx-post="/search" hx-trigger="keyup changed delay:300ms" 
               hx-target="#player-results">
    </div>

    <table>
    <thead>
        <tr>
            <th>B-Day</th>
            <th>Name</th>
            <th>Rating</th>
            <th>Federation</th>
            <th>Title</th>
        </tr>
    </thead>
    <tbody id="player-results">
        {{template "table.html" .}} 
    </tbody>
</table>
</body>
</html>

{{define "table-rows"}}
    {{range .}}
    <tr>
        <td>{{.Bday}}</td>
        <td>{{.Name}}</td>
        <td>{{.DEC25}}</td>
        <td>{{.Fed}}</td>
	<td>{{.Tit}}</td>
    </tr>
    {{else}}
    <tr><td colspan="3">No players found.</td></tr>
    {{end}}
{{end}}
